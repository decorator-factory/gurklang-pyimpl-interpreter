
window.fnl = {
    start: "Index",
    source: {"Index": "index.fnl", "Tutorial": {"Functions": "tutorial/01_functions.fnl", "Boxes": "tutorial/05_boxes.fnl"}},
    compiledHtml: {"Index": "<h1>Welcome to the Gurklang documentation!</h1><p>Gurklang is a<ul><li>stack-based</li><li>dynamically typed</li><li>functional</li></ul>programming language.</p><h1>What is...</h1><h2>...&#x27;stack-based&#x27;?</h2><p>In Gurklang, all operations manipulate a <em>stack</em> in some way:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">4</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">4</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre><ul><li><p>You start with a clean slate &mdash; an empty stack, denoted as <code>()</code></p></li><li><p>When you run the command <code>1</code>, you push the number <code>1</code> on top of the stack, and you end up with <code>(1 ())</code>, which means: <code>1</code>, then the empty stack.</p></li><li><p>When you run the command <code>2</code>, you push the number <code>2</code> on top of the stack, and you end up with <code>(2 (1 ()))</code>, which means: <code>2</code>, then <code>1</code>, then the empty stack.</p></li><li><p>Running <code>peek</code> simply prints the value of the stack</p></li></ul><p>Creating numbers isn&#x27;t very exciting. Let&#x27;s destroy them!<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">4</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">drop</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">drop</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">drop</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span></code></pre><p>As you can see, <code>drop</code> simply discards the top value on the stack.</p></p><p><p><code>dup</code>, on the other hand, duplicates the top value on the stack:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span></code></pre></p><p>You can also do maths!<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">14</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">14</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">42</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span></code></pre><p><code>+</code>, <code>*</code>, <code>-</code> pick the top two elements on the stack, do the respective operation on them, and put the result back on the stack.</p></p><p>Like in most programming languages, there are strings:<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">'Hello, world!'</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--string \">'Hello, world'</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Hello,</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">world!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"Hello, world!\"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Hello,</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">world!</span></code></pre>As you can see, both double and single quotes work.</p><p>If you&#x27;re just tired of spelling out some value every time, you can define a name!<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">42</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:answer</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"Hello, world!\"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:greeting</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">answer</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">42</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">greeting</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--string \">'Hello, world'</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">42</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">drop</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">drop</span></code></pre></p><p>You can also define your own functions, which is the most important aspect of the language, but more on that later:<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:3print</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"Hello,\"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">3print</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"How low\"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Hello,</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Hello,</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Hello,</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">How</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">low</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre></p><h2>...&#x27;dynamically typed&#x27;?</h2><p>While each value has a fixed type (e.g. an integer, a string, a function), type soundness is not statically determined.</p><p>On one hand, dynamic typing delays type errors until runtime:<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:double</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">double</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">10</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"a\"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">double</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--section gurklang--section--bad\"><span class=\"gurklang--token gurklang--token--comment \"># Failure in function +\n</span><span class=\"gurklang--token gurklang--token--comment \"># Reason: Str(value='a') cannot be added with Str(value='a')\n</span><span class=\"gurklang--token gurklang--token--comment \"># &gt; Stack:  [1 2 3 4 a a]\n</span><span class=\"gurklang--token gurklang--token--comment \"># Type traceback? for complete Python traceback\n</span></span><span>\n</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span></code></pre></p><p>On the other hand, you get more flexibility. You can easily define a function that works on one type, two types, all types, or can even take a variable number of arguments from the stack.</p><p>Fun fact: a dynamically typed language will never reject a valid program!</p><h2>...&#x27;functional&#x27;?</h2><p>Gurklang is influenced by functional programming languages, like Clojure and Haskell. Functional programming emphasizes:<ul><li>Higher-order functions &mdash; functions that operate on functions<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">7</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span></code></pre><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:do-twice</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">do-twice</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">9</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span></code></pre></li><li>Immutability: a definition is not a<i> variable </i>&mdash;you can&#x27;t reassign it.<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:pi</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:e</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:e</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--section gurklang--section--bad\"><span class=\"gurklang--token gurklang--token--comment \"># Failure in function def\n</span><span class=\"gurklang--token gurklang--token--comment \"># Reason: uncaught exception RuntimeError:\n</span><span class=\"gurklang--token gurklang--token--comment \"># Trying to reassign e\n</span><span class=\"gurklang--token gurklang--token--comment \"># &gt; Stack:  [9 2 :e]\n</span><span class=\"gurklang--token gurklang--token--comment \"># RuntimeError: def uncaught exception RuntimeError:\n</span><span class=\"gurklang--token gurklang--token--comment \"># Trying to reassign e\n</span><span class=\"gurklang--token gurklang--token--comment \"># Type traceback? for complete Python traceback\n</span></span><span>\n</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span></code></pre>There is a mechanism for managing mutable variables, but you&#x27;ll rarely need it.</li><li>Expressive language and rich standard library<pre><code language=\"gurklang\" data-imports=\"[{&quot;modules&quot;: &quot;coro&quot;, &quot;alias&quot;: &quot;iterate&quot;, &quot;name&quot;: &quot;iterate&quot;}]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:coro</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:all</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">import</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \">   </span><span class=\"gurklang--token gurklang--token--name \">swap</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \">   </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \">   </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">10</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">sleep</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \">   </span><span class=\"gurklang--token gurklang--token--name \">swap</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">rot</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">parent-scope</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:fib</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">generator</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">fib</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">forever</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">8</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span></code></pre></li><li>Strong typing: don&#x27;t hide errors, bring them out!<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">=</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--atom \">:false</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">=</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--atom \">:true</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"foo\"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">=</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--section gurklang--section--bad\"><span class=\"gurklang--token gurklang--token--comment \"># Failure in function =\n</span><span class=\"gurklang--token gurklang--token--comment \"># Reason: cannot compare type int with type str\n</span><span class=\"gurklang--token gurklang--token--comment \"># &gt; Stack:  [9 1 foo]\n</span><span class=\"gurklang--token gurklang--token--comment \"># Type traceback? for complete Python traceback\n</span></span><span>\n</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span></code></pre></li><li>Great recursion support<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \">   </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">drop</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \">   </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">n!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">parent-scope</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \">   </span><span class=\"gurklang--token gurklang--token--name \">if</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">parent-scope</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:n!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2000</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">n!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">33162750924506332411753933805763240...</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre></li></ul></p>", "Tutorial": {"Functions": "<h1><p>Creating your own functions</p></h1><p>A function is a way of establishing a simpler, smaller program inside of a bigger one.</p><p>Suppose that you need to write a function that finds <span class=\"math-inline\">$2^5$</span>. It&#x27;s not very hard:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">32</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre><p>\nBut then you might want to find <span class=\"math-inline\">$3^5$</span>, and <span class=\"math-inline\">$6^5$</span>,\nand even <span class=\"math-inline\">$8^{13}$</span>. Instead of typing out essentially the same code\nagain and again, you can create a function:\n</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:^5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">^5</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">32</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre><p>\n<tt>jar</tt> stores a sequence of commands. When you call <tt>^5</tt>,\nit executes them, as if you wrote the same sequence of instructions manually:\n</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">32</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre><p>Functions are useful because they allow you to name a certain action and refer to it many times in different contexts.</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">^5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">243</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">4</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">^5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">1024</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre><p>Let's look at a function definition in parts. First, you need to write a <em>code literal</em>. It's a Gurklang program, written between <code>{</code> and <code>}</code>.</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--section gurklang--section--\"><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span></span><span>\n</span><span class=\"gurklang--token gurklang--token--atom \">:^5</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">jar</span></code></pre><p>Then, we need to give our function a name. It must be an atom, like with <code>def</code>.</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--section gurklang--section--\"><span class=\"gurklang--token gurklang--token--atom \">:^5</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span></span><span>\n</span><span class=\"gurklang--token gurklang--token--name \">jar</span></code></pre><p>Finally, we call the built-in <code>jar</code> function to store a function under a name.</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--atom \">:^5</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--section gurklang--section--\"><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span></span><span>\n</span></code></pre><p>Why can't use use <code>def</code> to define functions? Well, let's try.</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:^5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">forget</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Sending</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">^5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">to</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">the</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">shredder...</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">done.</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:^5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">^5</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span></code></pre><p><code>def</code>ining a function like this just stores the code, so when you invoke <code>^5</code>, you put the function on top of the stack. You can call the built-in <code>!</code> function to call a function which is on top of the stack:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">^5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">32</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre><p>In fact, you can call a function without giving it a name:<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">32</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre></p><div class=\"admonition adm-info\"><div class=\"admonition-icon\"></div><div class=\"admonition-title\">Info</div><div class=\"admonition-body\"><p>A function name can be anything you like, except:</p><ul><li><p>it can't contain <code>{}()'\"</code></p></li><li><p>it can't be a number, like <code>23</code>, <code>-4</code>, or <code>+128</code></p></li></ul><p>You can give functions crazy names, like: <code>\u2264</code>, <code>empty?</code>, <code>\u2200x\u2208\u2115</code>, <code>[\ud83d\udc1d\u041f\u0427\u0415\u041b\u0410\ud83d\udc1d]</code></p><p>This is a powerful and dangerous ability. Try to stick to English words, except for common mathematical operators.</p></div></div><h1><p>Combining functions</p></h1><p>You can use functions to define other functions. For example:<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"*\"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">print</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:star</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"*\"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:star-nl</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">star</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">star</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">star</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">star-nl</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:star-row</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">star-row</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">star-nl</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">star-row</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">star-nl</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">star-nl</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:F</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">F</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">****</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">****</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">sleep</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">F</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">Fs</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:Fs</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">Fs</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">****</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">****</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">****</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">****</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span></code></pre></p><h1><p>Functions are values</p></h1><p>Remember how <code>!</code> calls a function that's on top of the stack? That's an example\nof how you can use functions as <em>values</em>: functions are ordinary \"things\" like\nnumbers and strings, not just collections of instructions.</p><p>This is how you can create a function that, given a function, puts 5 on the stack and executes the function:<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">swap</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:!5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">37</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!5</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">42</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre></p><div class=\"admonition adm-info\"><div class=\"admonition-icon\"></div><div class=\"admonition-title\">Info</div><div class=\"admonition-body\"><p>Functions that work with other functions as values are called <em>higher-order functions</em></p></div></div><p>Another useful built-in function is <code>close</code>. It consumes a function and a value, and returns a new function which is like the old one, but puts the value on the stack before running. Example:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">close</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span></code></pre><p>Here <code>close</code> \"adds\" <code>1</code> to the start of <code>{ 2 }</code>, and a new function with the\nbody <code>{ 1 2 }</code> is created.</p><p>Another example:<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">close</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:make-adder</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">37</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">make-adder</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">37</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">42</span></code></pre></p><p>In the above snippet, <code>make-adder</code> is a function that accepts an integer and gives back a function that adds this integer: <code>5 make-adder</code> is the same as <code>{5 +}</code>. You can store this function as well:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">make-adder</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:5+</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">37</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">5+</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">42</span></code></pre><h1><p><code>def</code> inside functions</p></h1><p>You can use <code>def</code> to define names inside a function. After the function has stopped running, the name vanishes.</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--name \">x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--name \">x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">x</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--section gurklang--section--bad\"><span class=\"gurklang--token gurklang--token--comment \"># KeyError: x\n</span><span class=\"gurklang--token gurklang--token--comment \"># Type traceback? for complete Python traceback\n</span></span><span>\n</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span></code></pre><p>You can use <code>def</code> inside a function to store some value from the stack and then refer to it:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:y</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \">   </span><span class=\"gurklang--token gurklang--token--name \">x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \">   </span><span class=\"gurklang--token gurklang--token--name \">y</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">y</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \">   </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:sum-squares</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">4</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">sum-squares</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">25</span></code></pre><p>When you execute a function, it creates its own little bubble, called its <em>local scope</em>. Inside that scope, you can define new names. They will disappear when the function is done running.</p><h1><p>Beyond the basics</p></h1><h2><p>Parent-scoped functions</p></h2><p>\nYou can mark a function as &quot;parent-scoped&quot; if it shouldn&#x27;t create a local\nscope, but instead should run in the scope of whoever executes it.\n</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">parent-scope</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--section gurklang--section--bad\"><span class=\"gurklang--token gurklang--token--comment \"># Failure in function def\n</span><span class=\"gurklang--token gurklang--token--comment \"># Reason: uncaught exception RuntimeError: Trying to reassign x\n</span><span class=\"gurklang--token gurklang--token--comment \"># &gt; Stack:  [2 :x]\n</span><span class=\"gurklang--token gurklang--token--comment \"># RuntimeError: def uncaught exception RuntimeError: Trying to reassign x\n</span><span class=\"gurklang--token gurklang--token--comment \"># Type traceback? for complete Python traceback\n</span></span><span>\n</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span></code></pre><p>This is useful in two cases:<ul><li>When you actually want to define a new name in the parent scope;</li><li>\nWhen you don&#x27;t want to create a nested scope. This is crucial for so-called\n<i>tail call optimization</i> in recursive functions. But more on that later.\n</li></ul></p><h2><p>Defining <code>def</code></p></h2><p>Surprisingly or not, <code>def</code> creates a function as well. Here, <code>x</code> and <code>y</code> are absolutely equivalent:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--int \">6</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">6</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:y</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span></code></pre><p>In fact, you can define <code>def</code> in terms of <code>jar</code>: <code>{ x } :name jar</code> is the same as <code>x :name var</code>. Try to define a <code>my-def</code> function that acts like <code>def</code>.</p><div class=\"admonition adm-answer\"><div class=\"admonition-icon\"></div><div class=\"admonition-title\">Answer</div><div class=\"admonition-body\"><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">swap</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">close</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">swap</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">parent-scope</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:my-def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span></code></pre></div></div><h2><p>Closures</p></h2><p>Remind yourself of this example:<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">close</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:make-adder</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">37</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">make-adder</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">37</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">42</span></code></pre></p><p>You can do the same with names, without using <code>close</code>:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--name \">x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:make-adder</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">37</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">make-adder</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--name \">x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">37</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">42</span></code></pre><p>When a function gives back another function, the old function's local scope doesn't actually die &mdash; it's stored in the returned function so that it can access the saved names.</p><h2><p>Exercises</p></h2><h3><ol>\n<li><code>!!</code></li>\n</ol></h3><p>Write and test a function <code>!!</code> that accepts a function <code>(n -- n)</code> and an integer, and first runs this function on the given integer, and then runs it again on the result.</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">7</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">*</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">26</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--comment \"># 2 2 * 1 +  --  5\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--comment \"># 5 5 * 1 +  --  26</span></code></pre><p>Implement this function in two ways: using a closure and using only stack manipulations.</p><div class=\"admonition adm-answer\"><div class=\"admonition-icon\"></div><div class=\"admonition-title\">Answer</div><div class=\"admonition-body\">Using a closure:<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:!!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--comment \"># bonus points if you came up with this:\n</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:!!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--comment \"># :-)</span></code></pre>Using stack manipulations (one way, there are many):<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">swap</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">over</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">swap</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:!!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span></code></pre></div></div><h3><ol>\n<li><code>forever</code></li>\n</ol></h3><p>Can you rewrite this function without using closures, so that it can be made parent-scoped?</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">forever</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:forever</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">sleep</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"Hello!\"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">forever</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Hello!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Hello!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Hello!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Hello!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">...</span></code></pre><div class=\"admonition adm-answer\"><div class=\"admonition-icon\"></div><div class=\"admonition-title\">Answer</div><div class=\"admonition-body\"><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">dup</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">forever</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">parent-scope</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:forever</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span></code></pre></div></div><p>Can you tell what will happen when you run this code?<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">forever</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">forever</span></code></pre></p><p>To test your prediction, use the debugger:<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">debug!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">forever</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">forever</span></code></pre></p><h3><ol>\n<li><code>?</code></li>\n</ol></h3><p>Create two functions, <code>true : (f g -- g!)</code> and <code>false : (f g -- f!)</code>:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">true</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">false</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">1</span></code></pre><p>Implement both the closure version and the stack manipulation version.</p><div class=\"admonition adm-answer\"><div class=\"admonition-icon\"></div><div class=\"admonition-title\">Answer</div><div class=\"admonition-body\">Closure:<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--comment \"># (f g -- g!)\n</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:g</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">g</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:true</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">var</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:g</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">g</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:true</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">var</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--comment \"># (f g -- f!)\n</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:g</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:false</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">var</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:g</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:false</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">var</span></code></pre>Stack juggling:<pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--comment \"># (f g -- g!)\n</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">swap</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">drop</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:true</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">var</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--comment \"># (f g -- f!)\n</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">drop</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:false</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">var</span></code></pre></div></div><p>Then write a function <code>?</code> that accepts a function and either <code>true</code> of <code>false</code>. If the second value is <code>true</code>, it runs the function. Otherwise, it discards it.</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"Hi!\"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">true</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">?</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Hi</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"Hi!\"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">false</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">?</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre><div class=\"admonition adm-answer\"><div class=\"admonition-icon\"></div><div class=\"admonition-title\">Answer</div><div class=\"admonition-body\"><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">unrot</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:?</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span></code></pre></div></div>", "Boxes": "<h1>Mutable variables with boxes</h1><p>While immutable data is generally easier to understand and debug, sometimes you do want mutable state either for convenience or for performance.</p><p>And, admittedly, the real world is stateful. When you take a cookie of of a package, it&#x27;s (unfortunately) not there anymore.</p><h1>Creating a box and reading from it</h1><p>All values in Gurklang are immutable. You can't make a name first refer to something, and then make it refer to something else. However, you can make a name refer to a \"box\". Then you can retrive a value from the box or put a new value in, like in a file system or a database. Operations on boxes are located in the <code>boxes</code> standard module. To create a box, you need to call the <code>box</code> function with its initial value:</p><pre><code language=\"gurklang\" data-imports=\"[{&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;box&quot;, &quot;name&quot;: &quot;box&quot;}]\"><span class=\"gurklang--token gurklang--token--atom \">:boxes</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">import</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--comment \"># box (T -- box[T])\n</span><span class=\"gurklang--token gurklang--token--int \">0</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:my-box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span></code></pre><p>You can read the value you&#x27;ve put in the box:</p><pre><code language=\"gurklang\" data-imports=\"[{&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;box&quot;, &quot;name&quot;: &quot;box&quot;}, {&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;-&gt;&quot;, &quot;name&quot;: &quot;-&gt;&quot;}]\"><span class=\"gurklang--token gurklang--token--atom \">:boxes</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">import</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">0</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:my-box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--comment \"># -&gt; (box[T] -- T)\n</span><span class=\"gurklang--token gurklang--token--name \">my-box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># 0</span></code></pre><h1>Writing to a box</h1><p>The difference from a normal deifnition is that you can call the `&lt;-` function to store something new in the box:</p><pre><code language=\"gurklang\" data-imports=\"[{&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;box&quot;, &quot;name&quot;: &quot;box&quot;}, {&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;-&gt;&quot;, &quot;name&quot;: &quot;-&gt;&quot;}, {&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;&lt;-&quot;, &quot;name&quot;: &quot;&lt;-&quot;}]\"><span class=\"gurklang--token gurklang--token--atom \">:boxes</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">import</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">0</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:my-box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># 0\n</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--comment \"># &lt;- (box[T] T -- )\n</span><span class=\"gurklang--token gurklang--token--name \">my-box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">my-box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># 5</span></code></pre><h1>Applying a function to a box</h1><p>If you wanted to change the value in the box using a function, you could do this:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name \">my-box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">my-box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span></code></pre><p>There's a shorthand for that, using the <code>&lt;=</code> function:</p><pre><code language=\"gurklang\" data-imports=\"[{&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;box&quot;, &quot;name&quot;: &quot;box&quot;}, {&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;-&gt;&quot;, &quot;name&quot;: &quot;-&gt;&quot;}, {&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;&lt;=&quot;, &quot;name&quot;: &quot;&lt;=&quot;}]\"><span class=\"gurklang--token gurklang--token--atom \">:boxes</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;=</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">import</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">0</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:my-box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">my-box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># 0\n</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--comment \"># &lt;= (box[T] (T -- T) -- )\n</span><span class=\"gurklang--token gurklang--token--name \">my-box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">+</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;=</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">my-box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># 2</span></code></pre><h1>Example of boxes: REPL configuration</h1><p>Try this in your REPL:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">repl[prompt]</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\":-) \"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--atom \">:-</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--atom \">:-</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">repl[prompt]</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"&gt;&gt;&gt; \"</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre><p>This is actually what styling functions like <code>repl[style:box]</code> do:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \">\n  </span><span class=\"gurklang--token gurklang--token--name \">repl[ml-prompt]</span><span class=\"gurklang--token gurklang--token--whitespace \">     </span><span class=\"gurklang--token gurklang--token--string \">\"&#9611; \"</span><span class=\"gurklang--token gurklang--token--whitespace \">\n  </span><span class=\"gurklang--token gurklang--token--name \">repl[prompt]</span><span class=\"gurklang--token gurklang--token--whitespace \">        </span><span class=\"gurklang--token gurklang--token--string \">\"&#9474; \"</span><span class=\"gurklang--token gurklang--token--whitespace \">\n  </span><span class=\"gurklang--token gurklang--token--name \">repl[before-output]</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--string \">\"&#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;\\n\"</span><span class=\"gurklang--token gurklang--token--whitespace \">\n  </span><span class=\"gurklang--token gurklang--token--name \">repl[after-output]</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--string \">\"\"</span><span class=\"gurklang--token gurklang--token--whitespace \">\n  </span><span class=\"gurklang--token gurklang--token--name \">repl[before-stack]</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--string \">\"&#9500;&#9472;\"</span><span class=\"gurklang--token gurklang--token--whitespace \">\n  </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--atom \">:repl[style:box]</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span></code></pre><h1>Advanced box usage: transactions</h1><p>Suppose that you have a box that stores a list of even length:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span></code></pre><p>...and you want to append two elements, <code>1</code> and <code>2</code> to it like this:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--atom \">:rest</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">rest</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--name \">,</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;=</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--atom \">:rest</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">rest</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--name \">,</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;=</span></code></pre><p>...or maybe like this:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--atom \">:rest</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--name \">x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">rest</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--name \">,</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;=</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:&lt;-cons-</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-cons-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-cons-</span></code></pre><p>But what if instead of <code>1</code> and <code>2</code> you want to push <code>1 f</code> and <code>:x :y g</code>?</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">f</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-cons-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:y</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">g</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-cons-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--section gurklang--section--bad\"><span class=\"gurklang--token gurklang--token--name \">Failure</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">in</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">function</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">g:</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">invariant</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">violated:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">`list`</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">is</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">not</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">of</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">even</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">length!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span></span><span>\n</span></code></pre><p>What an unfortunate course of action. Turns out <code>g</code> relies on the list being of even length. For this to work, we'll need a <em>transaction</em>. A transaction allows you to work on a temporary copy of the box state and then save it.</p><pre><code language=\"gurklang\" data-imports=\"[{&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;box&quot;, &quot;name&quot;: &quot;box&quot;}, {&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;-&gt;&quot;, &quot;name&quot;: &quot;-&gt;&quot;}, {&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;&lt;-&quot;, &quot;name&quot;: &quot;&lt;-&quot;}, {&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;&lt;=&quot;, &quot;name&quot;: &quot;&lt;=&quot;}, {&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;&lt;[&quot;, &quot;name&quot;: &quot;&lt;[&quot;}, {&quot;modules&quot;: &quot;boxes&quot;, &quot;alias&quot;: &quot;]&gt;&quot;, &quot;name&quot;: &quot;]&gt;&quot;}]\"><span class=\"gurklang--token gurklang--token--atom \">:boxes</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;=</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;[</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">]&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">import</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--comment \"># &lt;-cons- (box[list[T]] T --)\n</span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n    </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--atom \">:rest</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_brace \">{</span><span class=\"gurklang--token gurklang--token--name \">x</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">rest</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--name \">,</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;=</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--right_brace \">}</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:&lt;-cons-</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">jar</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--section gurklang--section--\"><span class=\"gurklang--token gurklang--token--comment \"># &lt;[ (box[_] --)\n</span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;[</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># start the transaction\n</span><span class=\"gurklang--token gurklang--token--whitespace \">\n    </span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># ()\n</span><span class=\"gurklang--token gurklang--token--whitespace \">\n    </span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-cons-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n    </span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># ()\n</span><span class=\"gurklang--token gurklang--token--whitespace \">    </span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-cons-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n    </span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># ()\n</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--comment \"># ]&gt; (box[_] --)\n</span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">]&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># commit the result\n</span></span><span>\n</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># (2 (1 ()))\n</span><span class=\"gurklang--token gurklang--token--comment \"># tada!</span></code></pre><p>You can use the <code>-!&gt;</code> function to see the current active state of the box:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;[</span><span class=\"gurklang--token gurklang--token--whitespace \">\n    </span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-cons-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n    </span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-!&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># (1 ())\n</span><span class=\"gurklang--token gurklang--token--whitespace \">    </span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-cons-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">]&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">list</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">println</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># (2 (1 ()))</span></code></pre><h1>Inspecting box state</h1><p>Sometimes you just want to see what's up with your boxes. <code>inspect</code> is a module which is similar to <code>inspect</code> and <code>ctypes</code> in Python. It provides reflection tools, as well as unholy hacks and dirty tricks. <em>Reflection</em> is the ability to inspect some normally private information related to an object, for example, the name of a function. This is how you can see the current box state:</p><pre><code language=\"gurklang\" data-imports=\"[{&quot;modules&quot;: &quot;inspect&quot;, &quot;alias&quot;: &quot;inspect.code-dump&quot;, &quot;name&quot;: &quot;code-dump&quot;}, {&quot;modules&quot;: &quot;inspect&quot;, &quot;alias&quot;: &quot;inspect.dis&quot;, &quot;name&quot;: &quot;dis&quot;}, {&quot;modules&quot;: &quot;inspect&quot;, &quot;alias&quot;: &quot;inspect.type&quot;, &quot;name&quot;: &quot;type&quot;}, {&quot;modules&quot;: &quot;inspect&quot;, &quot;alias&quot;: &quot;inspect.box-id?&quot;, &quot;name&quot;: &quot;box-id?&quot;}, {&quot;modules&quot;: &quot;inspect&quot;, &quot;alias&quot;: &quot;inspect.box-transactions?&quot;, &quot;name&quot;: &quot;box-transactions?&quot;}, {&quot;modules&quot;: &quot;inspect&quot;, &quot;alias&quot;: &quot;inspect.box-info!&quot;, &quot;name&quot;: &quot;box-info!&quot;}, {&quot;modules&quot;: &quot;inspect&quot;, &quot;alias&quot;: &quot;inspect.box-exists?&quot;, &quot;name&quot;: &quot;box-exists?&quot;}, {&quot;modules&quot;: &quot;inspect&quot;, &quot;alias&quot;: &quot;inspect.make-box!&quot;, &quot;name&quot;: &quot;make-box!&quot;}, {&quot;modules&quot;: &quot;inspect&quot;, &quot;alias&quot;: &quot;inspect.boxes?&quot;, &quot;name&quot;: &quot;boxes?&quot;}, {&quot;modules&quot;: &quot;inspect&quot;, &quot;alias&quot;: &quot;inspect.boxes!&quot;, &quot;name&quot;: &quot;boxes!&quot;}]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:inspect</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:prefix</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">import</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">inspect.boxes!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--string \">'... '</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--string \">'&gt;&gt;&gt; '</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--string \">''</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">4</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--string \">''</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">5</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--string \">'&lt;-- '</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--int \">6</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--atom \">:false</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre><p>This is how you can make a box given an ID:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">inspect.make-box!</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">-&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">peek</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">drop</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--string \">'&gt;&gt;&gt; '</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span></code></pre><p>This is how you can see the current state of a box:</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">0</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--atom \">:b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">def</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">inspect.box-info!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">id:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">7</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">transactions:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">0</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;[</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">inspect.box-info!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">id:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">7</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">transactions:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">1</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">0</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">inspect.box-info!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">id:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">7</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">transactions:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">0</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;[</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;-</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">inspect.box-info!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">id:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">7</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">transactions:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">3</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">0</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span></code></pre><h1>Rollback</h1><p>You can also <em>roll back</em> a transaction, i.e. return it to its previous state.</p><pre><code language=\"gurklang\" data-imports=\"[]\"><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">&lt;&lt;&lt;</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># rollback\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">inspect.box-info!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">id:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">7</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">transactions:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">0</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">]&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \">  </span><span class=\"gurklang--token gurklang--token--comment \"># commit\n</span><span class=\"gurklang--token gurklang--token--name gurklang--meta\">&gt;&gt;&gt;</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">b</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">inspect.box-info!</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">id:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--int \">7</span><span class=\"gurklang--token gurklang--token--whitespace \">\n</span><span class=\"gurklang--token gurklang--token--name \">Box</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--name \">transactions:</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--int \">2</span><span class=\"gurklang--token gurklang--token--whitespace \"> </span><span class=\"gurklang--token gurklang--token--left_paren \">(</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span><span class=\"gurklang--token gurklang--token--right_paren \">)</span></code></pre>"}},
    onPageSwitch: [], // (newPageTitle: string) => void
};
